version: "3.7" 

services: 
 frontend: 
  container_name: vue-frontend 
  build: 
   context: ./frontend/ 
   dockerfile: Dockerfile 
   target: development 
  ports:
   - 8080:8080
  volumes: 
  - ./frontend/:/app 
  restart: unless-stopped

 backend:
  container_name: springboot-backend
  build:
   context: ./backend/
   dockerfile: Dockerfile
   target: build
  ports:
   - 8081:8080
  volumes:
   - ./backend/:/app
  restart: unless-stopped

 db:
  image: postgres
  container_name: postgres_db
  environment:
   POSTGRES_DB: <db>
   POSTGRES_USER: <user>
   POSTGRES_PASSWORD: <password>
   PGDATA: /var/lib/postgresql/data/db-files/
  volumes:
   - ./postgres-database:/var/lib/postgresql/data
  restart: always
  ports:
   - 127.0.0.1:5432:5432
